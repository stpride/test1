name: Test DD

on:
  workflow_dispatch:
    inputs:
      resource:
        description: 'Data'
        required: false
        type: choice
        options:
        - AAA
        - BBB
        - CCC

env:
  RESOURCES: >
    {
      "AAA": {
        "key": "aaa-key",
        "dir": "fq/aaa-dir",
        "use_domain": 0
      },
      "BBB": {
        "key": "bbb-key",
        "dir": "fq/bbb-dir"
      },
      "CCC": {
        "key": "ccc-key",
        "dir": "fq/ccc-dir",
        "use_domain": 0
      },
    }
    
jobs:
  Setup:
    runs-on: ubuntu-latest
    steps:
      - name: Setup resource values
        shell: bash
        run: |
          tfkey="${{ fromJson(env.RESOURCES)[inputs.resource]['key'] }}"
          echo "key=$tfkey"
          tfdir="${{ fromJson(env.RESOURCES)[inputs.resource]['dir'] }}"
          echo "dir=$tfdir"
          use_domain="${{ fromJson(env.RESOURCES)[inputs.resource]['use_domain'] }}"
          echo "use_domain=$use_domain"
          
  #test:
  #  uses: stpride/test1/.github/workflows/dd-out.yaml@main
  #  with:
  #    resource: ${{ inputs.data }}
